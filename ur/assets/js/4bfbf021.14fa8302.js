"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[4816],{132(e,s,i){i.r(s),i.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"chapters/chapter-02-ros2-architecture/concepts","title":"Core Concepts: ROS 2 Architecture","description":"Deep dive into ROS 2 architecture, DDS middleware, node graphs, and QoS policies","source":"@site/docs/chapters/chapter-02-ros2-architecture/concepts.md","sourceDirName":"chapters/chapter-02-ros2-architecture","slug":"/chapters/chapter-02-ros2-architecture/concepts","permalink":"/Ai--book-/ur/docs/chapters/chapter-02-ros2-architecture/concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/aurangzaibmughal/Ai--book-/edit/main/docs/chapters/chapter-02-ros2-architecture/concepts.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"concepts","title":"Core Concepts: ROS 2 Architecture","sidebar_label":"Core Concepts","sidebar_position":5,"description":"Deep dive into ROS 2 architecture, DDS middleware, node graphs, and QoS policies"},"sidebar":"tutorialSidebar","previous":{"title":"Estimated Time","permalink":"/Ai--book-/ur/docs/chapters/chapter-02-ros2-architecture/estimated-time"},"next":{"title":"Code Examples","permalink":"/Ai--book-/ur/docs/chapters/chapter-02-ros2-architecture/code-examples"}}');var n=i(4848),t=i(8453);const l={id:"concepts",title:"Core Concepts: ROS 2 Architecture",sidebar_label:"Core Concepts",sidebar_position:5,description:"Deep dive into ROS 2 architecture, DDS middleware, node graphs, and QoS policies"},d="Core Concepts: ROS 2 Architecture",o={},c=[{value:"1. What is ROS 2?",id:"1-what-is-ros-2",level:2},{value:"ROS 2 is NOT:",id:"ros-2-is-not",level:3},{value:"ROS 2 IS:",id:"ros-2-is",level:3},{value:"2. Why ROS 2 Replaced ROS 1",id:"2-why-ros-2-replaced-ros-1",level:2},{value:"Critical Limitations of ROS 1",id:"critical-limitations-of-ros-1",level:3},{value:"Real-World Impact",id:"real-world-impact",level:3},{value:"3. The DDS Middleware Layer",id:"3-the-dds-middleware-layer",level:2},{value:"What is DDS?",id:"what-is-dds",level:3},{value:"DDS Architecture",id:"dds-architecture",level:3},{value:"Key DDS Concepts",id:"key-dds-concepts",level:3},{value:"1. Discovery Protocol (Automatic Node Detection)",id:"1-discovery-protocol-automatic-node-detection",level:4},{value:"2. Data-Centric Publish-Subscribe",id:"2-data-centric-publish-subscribe",level:4},{value:"3. Quality of Service (QoS) Policies",id:"3-quality-of-service-qos-policies",level:4},{value:"4. Quality of Service (QoS) Policies",id:"4-quality-of-service-qos-policies",level:2},{value:"Core QoS Policies",id:"core-qos-policies",level:3},{value:"1. Reliability",id:"1-reliability",level:4},{value:"2. Durability",id:"2-durability",level:4},{value:"3. History",id:"3-history",level:4},{value:"4. Deadline",id:"4-deadline",level:4},{value:"5. Lifespan",id:"5-lifespan",level:4},{value:"QoS Compatibility",id:"qos-compatibility",level:3},{value:"Predefined QoS Profiles",id:"predefined-qos-profiles",level:3},{value:"5. Node Graph Architecture",id:"5-node-graph-architecture",level:2},{value:"What is a Node?",id:"what-is-a-node",level:3},{value:"Node Graph Example",id:"node-graph-example",level:3},{value:"Visualizing the Node Graph",id:"visualizing-the-node-graph",level:3},{value:"6. ROS 2 Communication Primitives (Preview)",id:"6-ros-2-communication-primitives-preview",level:2},{value:"Topics (Pub/Sub)",id:"topics-pubsub",level:3},{value:"Services (Request/Response)",id:"services-requestresponse",level:3},{value:"Actions (Goal-Based)",id:"actions-goal-based",level:3},{value:"7. ROS 2 Domains",id:"7-ros-2-domains",level:2},{value:"8. ROS 2 Workspace Structure",id:"8-ros-2-workspace-structure",level:2},{value:"9. Key Terminology",id:"9-key-terminology",level:2},{value:"10. ROS 2 vs. Traditional Distributed Systems",id:"10-ros-2-vs-traditional-distributed-systems",level:2},{value:"Summary",id:"summary",level:2}];function a(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"core-concepts-ros-2-architecture",children:"Core Concepts: ROS 2 Architecture"})}),"\n",(0,n.jsx)(s.h2,{id:"1-what-is-ros-2",children:"1. What is ROS 2?"}),"\n",(0,n.jsxs)(s.p,{children:["ROS 2 (Robot Operating System 2) is a ",(0,n.jsx)(s.strong,{children:"middleware framework"})," that provides:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Communication infrastructure"})," for distributed robot systems"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Standard interfaces"})," for sensors, actuators, and algorithms"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Development tools"})," for building, testing, and deploying robot software"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Community ecosystem"})," of reusable packages and libraries"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"ros-2-is-not",children:"ROS 2 is NOT:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"\u274c An operating system (it runs on Linux, Windows, macOS)"}),"\n",(0,n.jsx)(s.li,{children:"\u274c A programming language (you write code in Python, C++, etc.)"}),"\n",(0,n.jsx)(s.li,{children:"\u274c A simulation environment (though it integrates with Gazebo, Isaac Sim)"}),"\n",(0,n.jsx)(s.li,{children:"\u274c A robot control library (it provides the communication layer)"}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"ros-2-is",children:"ROS 2 IS:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\u2705 A ",(0,n.jsx)(s.strong,{children:"middleware"})," layer for inter-process communication"]}),"\n",(0,n.jsxs)(s.li,{children:["\u2705 A ",(0,n.jsx)(s.strong,{children:"framework"})," for building modular robot software"]}),"\n",(0,n.jsxs)(s.li,{children:["\u2705 A ",(0,n.jsx)(s.strong,{children:"standard"})," for robotics software interfaces"]}),"\n",(0,n.jsxs)(s.li,{children:["\u2705 An ",(0,n.jsx)(s.strong,{children:"ecosystem"})," of tools and libraries"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"2-why-ros-2-replaced-ros-1",children:"2. Why ROS 2 Replaced ROS 1"}),"\n",(0,n.jsx)(s.p,{children:"ROS 1 (released 2007) was revolutionary but had fundamental limitations that couldn't be fixed without a complete redesign. ROS 2 (released 2017) addressed these issues:"}),"\n",(0,n.jsx)(s.h3,{id:"critical-limitations-of-ros-1",children:"Critical Limitations of ROS 1"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Issue"}),(0,n.jsx)(s.th,{children:"ROS 1 Problem"}),(0,n.jsx)(s.th,{children:"ROS 2 Solution"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Single Point of Failure"})}),(0,n.jsxs)(s.td,{children:["Required ",(0,n.jsx)(s.code,{children:"roscore"})," master node\u2014if it crashes, entire system fails"]}),(0,n.jsx)(s.td,{children:"Fully distributed\u2014no master node required"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Real-Time Performance"})}),(0,n.jsx)(s.td,{children:"TCP-based, unpredictable latency"}),(0,n.jsx)(s.td,{children:"DDS middleware with real-time guarantees"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Security"})}),(0,n.jsx)(s.td,{children:"No authentication or encryption"}),(0,n.jsx)(s.td,{children:"DDS Security (SROS2) with authentication, encryption, access control"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Multi-Robot Systems"})}),(0,n.jsx)(s.td,{children:"Difficult to coordinate multiple robots"}),(0,n.jsx)(s.td,{children:"Native multi-robot support via DDS domains"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Network Reliability"})}),(0,n.jsx)(s.td,{children:"Poor handling of WiFi dropouts"}),(0,n.jsx)(s.td,{children:"Configurable QoS policies for lossy networks"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Platform Support"})}),(0,n.jsx)(s.td,{children:"Linux-only (Ubuntu primarily)"}),(0,n.jsx)(s.td,{children:"Cross-platform: Linux, Windows, macOS, RTOS"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Production Use"})}),(0,n.jsx)(s.td,{children:"Designed for research labs"}),(0,n.jsx)(s.td,{children:"Production-ready with safety certifications"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"real-world-impact",children:"Real-World Impact"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Example: Autonomous Delivery Robots"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"ROS 1"}),": If the master node crashes due to a network glitch, the robot stops dead\u2014potentially in the middle of a street"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"ROS 2"}),": Each node operates independently; temporary network loss doesn't halt the robot"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.strong,{children:"Example: Humanoid Robot Control"})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"ROS 1"}),": TCP latency makes 1kHz motor control loops impossible"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"ROS 2"}),": DDS with RELIABLE QoS achieves sub-millisecond latency for real-time control"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"3-the-dds-middleware-layer",children:"3. The DDS Middleware Layer"}),"\n",(0,n.jsx)(s.h3,{id:"what-is-dds",children:"What is DDS?"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"DDS (Data Distribution Service)"}),' is an OMG (Object Management Group) standard for real-time, distributed publish-subscribe communication. Think of it as "enterprise-grade pub/sub for mission-critical systems."']}),"\n",(0,n.jsx)(s.p,{children:"DDS is used in:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\ud83d\ude80 ",(0,n.jsx)(s.strong,{children:"Aerospace"}),": NASA, SpaceX, Boeing"]}),"\n",(0,n.jsxs)(s.li,{children:["\ud83c\udfe5 ",(0,n.jsx)(s.strong,{children:"Medical Devices"}),": Surgical robots, patient monitoring"]}),"\n",(0,n.jsxs)(s.li,{children:["\ud83c\udfed ",(0,n.jsx)(s.strong,{children:"Industrial Automation"}),": Factory robots, SCADA systems"]}),"\n",(0,n.jsxs)(s.li,{children:["\ud83d\ude97 ",(0,n.jsx)(s.strong,{children:"Automotive"}),": ADAS, autonomous driving"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"dds-architecture",children:"DDS Architecture"}),"\n",(0,n.jsx)(s.mermaid,{value:'graph TB\n    APP["<b>Application Layer</b><br/>Your ROS 2 Nodes - Python/C++"]\n    ROS["<b>ROS 2 Layer</b><br/>rclpy, rclcpp - ROS Client Libraries"]\n    DDS["<b>DDS Middleware</b><br/>Fast-DDS, Cyclone DDS, RTI Connext<br/>\u2022 Discovery Protocol (finds other nodes)<br/>\u2022 Data Serialization (CDR format)<br/>\u2022 QoS Enforcement (reliability, durability)<br/>\u2022 Transport Layer (UDP, Shared Memory, TCP)"]\n    NET["<b>Network/OS Layer</b><br/>UDP/IP, Shared Memory, etc."]\n\n    APP <--\x3e ROS\n    ROS <--\x3e DDS\n    DDS <--\x3e NET\n\n    style APP fill:#E3F2FD,stroke:#1976D2,stroke-width:2px\n    style ROS fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px\n    style DDS fill:#FFF3E0,stroke:#F57C00,stroke-width:2px\n    style NET fill:#E8F5E9,stroke:#388E3C,stroke-width:2px'}),"\n",(0,n.jsx)(s.h3,{id:"key-dds-concepts",children:"Key DDS Concepts"}),"\n",(0,n.jsx)(s.h4,{id:"1-discovery-protocol-automatic-node-detection",children:"1. Discovery Protocol (Automatic Node Detection)"}),"\n",(0,n.jsxs)(s.p,{children:["Unlike ROS 1's master node, DDS uses ",(0,n.jsx)(s.strong,{children:"automatic discovery"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:'Node A starts \u2192 Broadcasts "I exist!" via multicast UDP\nNode B hears broadcast \u2192 Responds "I exist too!"\nNodes exchange metadata \u2192 Establish direct communication\n'})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"No configuration needed!"})," Nodes on the same network automatically find each other."]}),"\n",(0,n.jsx)(s.h4,{id:"2-data-centric-publish-subscribe",children:"2. Data-Centric Publish-Subscribe"}),"\n",(0,n.jsxs)(s.p,{children:["DDS is ",(0,n.jsx)(s.strong,{children:"data-centric"}),", not message-centric:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:'Publishers declare "I have data of type X"'}),"\n",(0,n.jsx)(s.li,{children:'Subscribers declare "I want data of type X"'}),"\n",(0,n.jsxs)(s.li,{children:["DDS matches them automatically based on ",(0,n.jsx)(s.strong,{children:"topic name"})," and ",(0,n.jsx)(s.strong,{children:"data type"})]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"3-quality-of-service-qos-policies",children:"3. Quality of Service (QoS) Policies"}),"\n",(0,n.jsxs)(s.p,{children:["QoS policies define ",(0,n.jsx)(s.strong,{children:"how"})," data is delivered, not just ",(0,n.jsx)(s.strong,{children:"what"})," data is delivered."]}),"\n",(0,n.jsx)(s.h2,{id:"4-quality-of-service-qos-policies",children:"4. Quality of Service (QoS) Policies"}),"\n",(0,n.jsx)(s.p,{children:"QoS policies are the most important concept in ROS 2. They determine reliability, performance, and resource usage."}),"\n",(0,n.jsx)(s.h3,{id:"core-qos-policies",children:"Core QoS Policies"}),"\n",(0,n.jsx)(s.h4,{id:"1-reliability",children:"1. Reliability"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"RELIABLE"}),": Guaranteed delivery (like TCP)"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Use for: Commands, configuration, critical sensor data"}),"\n",(0,n.jsx)(s.li,{children:"Trade-off: Higher latency, more bandwidth"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"BEST_EFFORT"}),": No delivery guarantee (like UDP)"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Use for: High-frequency sensor streams (camera, LIDAR)"}),"\n",(0,n.jsx)(s.li,{children:"Trade-off: Possible data loss, lower latency"}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy\n\n# For critical commands\nreliable_qos = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    depth=10\n)\n\n# For high-frequency sensor data\nbest_effort_qos = QoSProfile(\n    reliability=ReliabilityPolicy.BEST_EFFORT,\n    depth=1\n)\n"})}),"\n",(0,n.jsx)(s.h4,{id:"2-durability",children:"2. Durability"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"VOLATILE"}),": New subscribers only get future messages"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Use for: Real-time sensor streams"}),"\n",(0,n.jsx)(s.li,{children:"Behavior: Join late \u2192 miss past data"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"TRANSIENT_LOCAL"}),": New subscribers get last N messages"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Use for: Configuration, map data, robot state"}),"\n",(0,n.jsx)(s.li,{children:"Behavior: Join late \u2192 receive cached messages"}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"from rclpy.qos import DurabilityPolicy\n\n# Configuration that late-joiners need\nconfig_qos = QoSProfile(\n    durability=DurabilityPolicy.TRANSIENT_LOCAL,\n    depth=1  # Keep last message\n)\n"})}),"\n",(0,n.jsx)(s.h4,{id:"3-history",children:"3. History"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"KEEP_LAST"}),": Keep last N messages in queue"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Use for: Most applications"}),"\n",(0,n.jsx)(s.li,{children:"Depth=1: Only latest data matters (sensor streams)"}),"\n",(0,n.jsx)(s.li,{children:"Depth=10: Keep recent history (commands)"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"KEEP_ALL"}),": Keep all messages (until memory limit)"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Use for: Logging, data recording"}),"\n",(0,n.jsx)(s.li,{children:"Risk: Memory exhaustion if consumer is slow"}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"4-deadline",children:"4. Deadline"}),"\n",(0,n.jsx)(s.p,{children:'Maximum time between messages before considered "stale"'}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"from rclpy.qos import QoSProfile\nfrom rclpy.duration import Duration\n\n# Expect heartbeat every 100ms\nheartbeat_qos = QoSProfile(\n    deadline=Duration(seconds=0.1)\n)\n"})}),"\n",(0,n.jsx)(s.p,{children:"If deadline is missed, ROS 2 triggers a callback\u2014useful for detecting sensor failures."}),"\n",(0,n.jsx)(s.h4,{id:"5-lifespan",children:"5. Lifespan"}),"\n",(0,n.jsx)(s.p,{children:"Maximum time a message is valid"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"# Message expires after 5 seconds\nqos = QoSProfile(\n    lifespan=Duration(seconds=5.0)\n)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Prevents acting on stale data (e.g., old obstacle detections)."}),"\n",(0,n.jsx)(s.h3,{id:"qos-compatibility",children:"QoS Compatibility"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Critical Rule"}),": Publisher and subscriber QoS must be ",(0,n.jsx)(s.strong,{children:"compatible"}),", not identical."]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Publisher"}),(0,n.jsx)(s.th,{children:"Subscriber"}),(0,n.jsx)(s.th,{children:"Compatible?"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"RELIABLE"}),(0,n.jsx)(s.td,{children:"RELIABLE"}),(0,n.jsx)(s.td,{children:"\u2705 Yes"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"RELIABLE"}),(0,n.jsx)(s.td,{children:"BEST_EFFORT"}),(0,n.jsx)(s.td,{children:"\u2705 Yes (subscriber gets reliable data)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"BEST_EFFORT"}),(0,n.jsx)(s.td,{children:"RELIABLE"}),(0,n.jsx)(s.td,{children:"\u274c No (subscriber demands reliability publisher can't provide)"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"BEST_EFFORT"}),(0,n.jsx)(s.td,{children:"BEST_EFFORT"}),(0,n.jsx)(s.td,{children:"\u2705 Yes"})]})]})]}),"\n",(0,n.jsx)(s.admonition,{title:"Common Mistake",type:"warning",children:(0,n.jsxs)(s.p,{children:["If your subscriber isn't receiving data, check QoS compatibility first! Use ",(0,n.jsx)(s.code,{children:"ros2 topic info -v <topic>"})," to see QoS settings."]})}),"\n",(0,n.jsx)(s.h3,{id:"predefined-qos-profiles",children:"Predefined QoS Profiles"}),"\n",(0,n.jsx)(s.p,{children:"ROS 2 provides standard profiles:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"from rclpy.qos import qos_profile_sensor_data, qos_profile_system_default\n\n# For sensor streams (BEST_EFFORT, VOLATILE, depth=5)\ncamera_sub = node.create_subscription(\n    Image,\n    '/camera/image',\n    callback,\n    qos_profile_sensor_data\n)\n\n# For commands (RELIABLE, VOLATILE, depth=10)\ncmd_pub = node.create_publisher(\n    Twist,\n    '/cmd_vel',\n    qos_profile_system_default\n)\n"})}),"\n",(0,n.jsx)(s.h2,{id:"5-node-graph-architecture",children:"5. Node Graph Architecture"}),"\n",(0,n.jsx)(s.h3,{id:"what-is-a-node",children:"What is a Node?"}),"\n",(0,n.jsxs)(s.p,{children:["A ",(0,n.jsx)(s.strong,{children:"node"})," is a single-purpose process that performs one task:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\u2705 Good: ",(0,n.jsx)(s.code,{children:"camera_driver"})," node publishes images"]}),"\n",(0,n.jsxs)(s.li,{children:["\u2705 Good: ",(0,n.jsx)(s.code,{children:"object_detector"})," node processes images"]}),"\n",(0,n.jsxs)(s.li,{children:["\u274c Bad: ",(0,n.jsx)(s.code,{children:"robot_brain"})," node does everything"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Design Principle"}),": One node = one responsibility (like microservices)"]}),"\n",(0,n.jsx)(s.h3,{id:"node-graph-example",children:"Node Graph Example"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Camera     \u2502 /image  \u2502   Object     \u2502 /objects\u2502   Motion     \u2502\n\u2502   Driver     \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502   Detector   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502   Planner    \u2502\n\u2502              \u2502         \u2502              \u2502         \u2502              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                          \u2502\n                                                          \u2502 /cmd_vel\n                                                          \u2193\n                                                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                                   \u2502   Motor      \u2502\n                                                   \u2502   Controller \u2502\n                                                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,n.jsx)(s.h3,{id:"visualizing-the-node-graph",children:"Visualizing the Node Graph"}),"\n",(0,n.jsxs)(s.p,{children:["ROS 2 provides ",(0,n.jsx)(s.code,{children:"rqt_graph"})," to visualize running nodes:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"ros2 run rqt_graph rqt_graph\n"})}),"\n",(0,n.jsx)(s.p,{children:"This shows:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Nodes"})," (ovals)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Topics"})," (rectangles)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Connections"})," (arrows)"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"6-ros-2-communication-primitives-preview",children:"6. ROS 2 Communication Primitives (Preview)"}),"\n",(0,n.jsx)(s.p,{children:"ROS 2 provides three communication patterns (detailed in Chapter 3):"}),"\n",(0,n.jsx)(s.h3,{id:"topics-pubsub",children:"Topics (Pub/Sub)"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Use case"}),": Continuous data streams"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Example"}),": Camera images, LIDAR scans, joint states"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Pattern"}),": Many-to-many (multiple publishers/subscribers)"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"services-requestresponse",children:"Services (Request/Response)"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Use case"}),": On-demand computation"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Example"}),': "Calculate inverse kinematics for this pose"']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Pattern"}),": One-to-one (client waits for server response)"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"actions-goal-based",children:"Actions (Goal-Based)"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Use case"}),": Long-running tasks with feedback"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Example"}),': "Navigate to waypoint X" (with progress updates)']}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Pattern"}),": One-to-one with feedback and cancellation"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"7-ros-2-domains",children:"7. ROS 2 Domains"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Domains"})," isolate ROS 2 systems on the same network."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"# Terminal 1: Domain 0 (default)\nexport ROS_DOMAIN_ID=0\nros2 run demo_nodes_py talker\n\n# Terminal 2: Domain 1 (isolated)\nexport ROS_DOMAIN_ID=1\nros2 run demo_nodes_py listener  # Won't hear talker!\n"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Use cases"}),":"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Multiple robots in same building"}),"\n",(0,n.jsx)(s.li,{children:"Isolating test environments"}),"\n",(0,n.jsx)(s.li,{children:"Security boundaries"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Valid range"}),": 0-101 (102-232 reserved for vendors)"]}),"\n",(0,n.jsx)(s.h2,{id:"8-ros-2-workspace-structure",children:"8. ROS 2 Workspace Structure"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"ros2_workspace/\n\u251c\u2500\u2500 src/                    # Source code\n\u2502   \u251c\u2500\u2500 my_robot_pkg/\n\u2502   \u2502   \u251c\u2500\u2500 my_robot_pkg/   # Python package\n\u2502   \u2502   \u251c\u2500\u2500 setup.py\n\u2502   \u2502   \u2514\u2500\u2500 package.xml\n\u2502   \u2514\u2500\u2500 another_pkg/\n\u251c\u2500\u2500 build/                  # Build artifacts (auto-generated)\n\u251c\u2500\u2500 install/                # Installed packages (auto-generated)\n\u2514\u2500\u2500 log/                    # Build logs (auto-generated)\n"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Key principle"}),": Only edit files in ",(0,n.jsx)(s.code,{children:"src/"}),". Never touch ",(0,n.jsx)(s.code,{children:"build/"})," or ",(0,n.jsx)(s.code,{children:"install/"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"9-key-terminology",children:"9. Key Terminology"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Term"}),(0,n.jsx)(s.th,{children:"Definition"}),(0,n.jsx)(s.th,{children:"Example"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Node"})}),(0,n.jsx)(s.td,{children:"Single-purpose process"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"camera_driver"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Topic"})}),(0,n.jsx)(s.td,{children:"Named data stream"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/camera/image"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Message"})}),(0,n.jsx)(s.td,{children:"Data structure"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"sensor_msgs/Image"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Publisher"})}),(0,n.jsx)(s.td,{children:"Sends data to topic"}),(0,n.jsx)(s.td,{children:"Camera node publishes images"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Subscriber"})}),(0,n.jsx)(s.td,{children:"Receives data from topic"}),(0,n.jsx)(s.td,{children:"Detector node subscribes to images"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Package"})}),(0,n.jsx)(s.td,{children:"Collection of nodes"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"my_robot_bringup"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Workspace"})}),(0,n.jsx)(s.td,{children:"Collection of packages"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"~/ros2_ws"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"DDS"})}),(0,n.jsx)(s.td,{children:"Middleware layer"}),(0,n.jsx)(s.td,{children:"Fast-DDS, Cyclone DDS"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"QoS"})}),(0,n.jsx)(s.td,{children:"Communication policy"}),(0,n.jsx)(s.td,{children:"RELIABLE, BEST_EFFORT"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"10-ros-2-vs-traditional-distributed-systems",children:"10. ROS 2 vs. Traditional Distributed Systems"}),"\n",(0,n.jsx)(s.p,{children:"If you've worked with distributed systems, here's how ROS 2 compares:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Concept"}),(0,n.jsx)(s.th,{children:"ROS 2"}),(0,n.jsx)(s.th,{children:"Traditional Web"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Pub/Sub"}),(0,n.jsx)(s.td,{children:"Topics"}),(0,n.jsx)(s.td,{children:"Kafka, Redis Pub/Sub"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"RPC"}),(0,n.jsx)(s.td,{children:"Services"}),(0,n.jsx)(s.td,{children:"REST API, gRPC"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Long Tasks"}),(0,n.jsx)(s.td,{children:"Actions"}),(0,n.jsx)(s.td,{children:"WebSockets, Server-Sent Events"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Discovery"}),(0,n.jsx)(s.td,{children:"DDS automatic"}),(0,n.jsx)(s.td,{children:"Service mesh, DNS"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Serialization"}),(0,n.jsx)(s.td,{children:"CDR (DDS)"}),(0,n.jsx)(s.td,{children:"JSON, Protobuf"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Transport"}),(0,n.jsx)(s.td,{children:"UDP (default)"}),(0,n.jsx)(s.td,{children:"HTTP/TCP"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Real-Time"}),(0,n.jsx)(s.td,{children:"Yes (with QoS)"}),(0,n.jsx)(s.td,{children:"No (best-effort)"})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Key Takeaways"}),":"]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["ROS 2 is a ",(0,n.jsx)(s.strong,{children:"middleware framework"}),", not an OS"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"DDS"})," provides the distributed communication layer"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"QoS policies"})," are critical for reliable robot behavior"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Nodes"})," are single-purpose processes that communicate via topics"]}),"\n",(0,n.jsxs)(s.li,{children:["ROS 2 is ",(0,n.jsx)(s.strong,{children:"production-ready"})," with real-time and security features"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"No master node"})," = more robust than ROS 1"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Next Steps"}),":"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Set up your ROS 2 environment in the ",(0,n.jsx)(s.a,{href:"./hands-on-lab",children:"Hands-On Lab"})]}),"\n",(0,n.jsxs)(s.li,{children:["Create your first nodes with ",(0,n.jsx)(s.a,{href:"./code-examples",children:"Code Examples"})]}),"\n",(0,n.jsxs)(s.li,{children:["Test your understanding with ",(0,n.jsx)(s.a,{href:"./exercises",children:"Exercises"})]}),"\n"]}),"\n",(0,n.jsxs)(s.admonition,{title:"Mental Model",type:"tip",children:[(0,n.jsxs)(s.p,{children:["Think of ROS 2 as a ",(0,n.jsx)(s.strong,{children:"nervous system"}),":"]}),(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Nodes"})," = neurons (processing units)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Topics"})," = synapses (connections)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Messages"})," = nerve signals (data)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"DDS"})," = the biological infrastructure that makes it all work"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"QoS"})," = signal priority and reliability settings"]}),"\n"]})]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8453(e,s,i){i.d(s,{R:()=>l,x:()=>d});var r=i(6540);const n={},t=r.createContext(n);function l(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);