"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[2906],{8419(e,t,s){s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"chapters/chapter-02-ros2-architecture/tests/README","title":"ROS 2 Testing Examples","description":"This directory contains test examples for Chapter 2 (ROS 2 Architecture). These tests demonstrate best practices for testing ROS 2 nodes.","source":"@site/docs/chapters/chapter-02-ros2-architecture/tests/README.md","sourceDirName":"chapters/chapter-02-ros2-architecture/tests","slug":"/chapters/chapter-02-ros2-architecture/tests/","permalink":"/Ai--book-/ur/docs/chapters/chapter-02-ros2-architecture/tests/","draft":false,"unlisted":false,"editUrl":"https://github.com/aurangzaibmughal/Ai--book-/edit/main/docs/chapters/chapter-02-ros2-architecture/tests/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2 Validation Checklist","permalink":"/Ai--book-/ur/docs/chapters/chapter-02-ros2-architecture/VALIDATION-CHECKLIST"},"next":{"title":"\u062c\u0627\u0626\u0632\u06c1","permalink":"/Ai--book-/ur/docs/chapters/chapter-03-ros2-workspace/"}}');var i=s(4848),r=s(8453);const o={},l="ROS 2 Testing Examples",c={},a=[{value:"Test Types",id:"test-types",level:2},{value:"Unit Tests (<code>test_temperature_publisher.py</code>)",id:"unit-tests-test_temperature_publisherpy",level:3},{value:"Integration Tests (<code>test_integration.py</code>)",id:"integration-tests-test_integrationpy",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Running Tests",id:"running-tests",level:2},{value:"Run All Tests",id:"run-all-tests",level:3},{value:"Run Specific Test File",id:"run-specific-test-file",level:3},{value:"Run with Coverage",id:"run-with-coverage",level:3},{value:"Test Structure",id:"test-structure",level:2},{value:"Writing Your Own Tests",id:"writing-your-own-tests",level:2},{value:"Unit Test Template",id:"unit-test-template",level:3},{value:"Integration Test Template",id:"integration-test-template",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Issues",id:"common-issues",level:2},{value:"Issue: &quot;rclpy already initialized&quot;",id:"issue-rclpy-already-initialized",level:3},{value:"Issue: &quot;Node not found in test&quot;",id:"issue-node-not-found-in-test",level:3},{value:"Issue: &quot;Test timeout&quot;",id:"issue-test-timeout",level:3},{value:"Resources",id:"resources",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"ros-2-testing-examples",children:"ROS 2 Testing Examples"})}),"\n",(0,i.jsx)(t.p,{children:"This directory contains test examples for Chapter 2 (ROS 2 Architecture). These tests demonstrate best practices for testing ROS 2 nodes."}),"\n",(0,i.jsx)(t.h2,{id:"test-types",children:"Test Types"}),"\n",(0,i.jsxs)(t.h3,{id:"unit-tests-test_temperature_publisherpy",children:["Unit Tests (",(0,i.jsx)(t.code,{children:"test_temperature_publisher.py"}),")"]}),"\n",(0,i.jsx)(t.p,{children:"Tests individual node functionality in isolation using pytest and ROS 2 testing utilities."}),"\n",(0,i.jsxs)(t.h3,{id:"integration-tests-test_integrationpy",children:["Integration Tests (",(0,i.jsx)(t.code,{children:"test_integration.py"}),")"]}),"\n",(0,i.jsx)(t.p,{children:"Tests multiple nodes working together using launch_testing framework."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(t.p,{children:"Install testing dependencies:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Install pytest and ROS 2 testing tools\nsudo apt install python3-pytest ros-humble-launch-testing ros-humble-launch-testing-ament-cmake\n\n# Install pytest plugins for ROS 2\npip3 install pytest-timeout\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,i.jsx)(t.h3,{id:"run-all-tests",children:"Run All Tests"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# From the workspace root\ncd ~/ros2_ws\ncolcon test --packages-select my_robot_package\ncolcon test-result --verbose\n"})}),"\n",(0,i.jsx)(t.h3,{id:"run-specific-test-file",children:"Run Specific Test File"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Run unit tests only\npytest src/my_robot_package/tests/test_temperature_publisher.py -v\n\n# Run integration tests only\npytest src/my_robot_package/tests/test_integration.py -v\n"})}),"\n",(0,i.jsx)(t.h3,{id:"run-with-coverage",children:"Run with Coverage"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Install coverage tool\npip3 install pytest-cov\n\n# Run tests with coverage report\npytest src/my_robot_package/tests/ --cov=my_robot_package --cov-report=html\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"test-structure",children:"Test Structure"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"tests/\n\u251c\u2500\u2500 README.md                      # This file\n\u251c\u2500\u2500 test_temperature_publisher.py  # Unit tests for publisher node\n\u2514\u2500\u2500 test_integration.py            # Integration tests for multi-node systems\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"writing-your-own-tests",children:"Writing Your Own Tests"}),"\n",(0,i.jsx)(t.h3,{id:"unit-test-template",children:"Unit Test Template"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"import pytest\nimport rclpy\nfrom rclpy.node import Node\n\ndef test_my_node():\n    rclpy.init()\n    node = MyNode()\n    # Test node functionality\n    assert node.some_property == expected_value\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,i.jsx)(t.h3,{id:"integration-test-template",children:"Integration Test Template"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"import launch\nimport launch_testing\nimport pytest\n\n@pytest.mark.launch_test\ndef generate_test_description():\n    return launch.LaunchDescription([\n        # Launch your nodes here\n    ])\n\nclass TestIntegration:\n    def test_nodes_communicate(self):\n        # Test inter-node communication\n        pass\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Isolate Tests"}),": Each test should be independent and not rely on other tests"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Use Fixtures"}),": Use pytest fixtures for common setup/teardown"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Mock External Dependencies"}),": Mock hardware sensors, external services"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Test Edge Cases"}),": Test error conditions, boundary values, timeouts"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Keep Tests Fast"}),": Unit tests should run in milliseconds, integration tests in seconds"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Use Descriptive Names"}),": Test names should clearly describe what they test"]}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsx)(t.h3,{id:"issue-rclpy-already-initialized",children:'Issue: "rclpy already initialized"'}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution"}),": Ensure ",(0,i.jsx)(t.code,{children:"rclpy.shutdown()"})," is called in teardown or use fixtures"]}),"\n",(0,i.jsx)(t.h3,{id:"issue-node-not-found-in-test",children:'Issue: "Node not found in test"'}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution"}),": Check that node is properly launched in test description"]}),"\n",(0,i.jsx)(t.h3,{id:"issue-test-timeout",children:'Issue: "Test timeout"'}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Solution"}),": Increase timeout or check for deadlocks in node callbacks"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"resources",children:"Resources"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Testing/Testing-Main.html",children:"ROS 2 Testing Guide"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.pytest.org/",children:"pytest Documentation"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/ros2/launch/tree/humble/launch_testing",children:"launch_testing Documentation"})}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note"}),": These are educational examples. In production, you would have more comprehensive test coverage including edge cases, error handling, and performance tests."]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,t,s){s.d(t,{R:()=>o,x:()=>l});var n=s(6540);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);